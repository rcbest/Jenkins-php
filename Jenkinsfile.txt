pipeline {
    agent any
    parameters {
        choice(name: 'BRANCH', choices: ['main', 'lenkins_jobs'])
    }
    
    stages {
        stage('Build') {
            steps {
                echo 'Hello World'
            }
        }
        stage('Test') {
            when {
                BRANCH == 'jenkins_jobs'
                                
             }
            steps {
                echo 'Hello ${BRANCH}'
            }
        }
        stage('Deploy') {
            steps {
                echo 'Hello World'
            }
        }
    }
    post {
         always {
             echo "You can always see me"
         }
         success {
              echo "I am running because the job ran successfully"
         }
         unstable {
              echo "Gear up ! The build is unstable. Try fix it"
         }
         failure {
             echo "OMG ! The build failed"
         }
    }

}

